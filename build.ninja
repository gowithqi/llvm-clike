cxx = g++
cflags = -Iinclude -Iout `llvm-config --libs core jit native --cxxflags --ldflags`

rule flex
    command = flex -o $out $in 

rule bison
    command = bison -d -o $out $in

rule cxx
    command = $cxx $cflags -o $out $in

build out/tokens.cpp: flex src/tokens.l
build out/parser.cpp: bison src/parser.y 
build out/parser: cxx out/parser.cpp out/tokens.cpp src/codegen.cpp src/main.cpp
